{"version":3,"sources":["webpack:///./src/views/mvPlayer.vue?547e","webpack:///src/views/mvPlayer.vue","webpack:///./src/views/mvPlayer.vue?f422","webpack:///./src/views/mvPlayer.vue","webpack:///./src/views/mvPlayer.vue?cb61"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","ref","attrs","controls","crossorigin","src","videoUrl","_v","_s","mvinfo","name","artist","staticStyle","text-align","item-layout","_l","comment","index","key","avatar","title","username","description","content","slot","type","stars","time","loading","extracting","long","on","click","extract","status","icon","download","staticRenderFns","mvPlayervue_type_script_lang_js_","components","data","$route","params","mv","comments","notPrepared","extractUrl","methods","initVideo","uri","arguments","length","undefined","initComments","comm","hot","stdParams","mvurl","picurl","metadata","_this","Object","apihub","then","resp","url","window","open","created","mounted","_this2","$emit","p","platform","id","mvid","response","views_mvPlayervue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_mvPlayer_vue_vue_type_style_index_0_id_be74a7d8_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_mvPlayer_vue_vue_type_style_index_0_id_be74a7d8_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"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","file":"js/chunk-74393a94.b1118c35.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"fullscreen\"},[_c('div',{staticClass:\"video-area\"},[_c('div',{staticClass:\"video-background\"},[_c('video',{ref:\"video\",attrs:{\"controls\":\"\",\"crossorigin\":\"anonymous\",\"src\":_vm.videoUrl}})])]),_c('div',{staticClass:\"comments\"},[_c('div',{staticClass:\"info\"},[_c('b',[_vm._v(_vm._s(_vm.mvinfo.name))]),_c('div',[_vm._v(_vm._s(_vm.mvinfo.artist))])]),_c('List',{staticStyle:{\"text-align\":\"left\"},attrs:{\"item-layout\":\"vertical\"}},_vm._l((_vm.comments),function(comment,index){return _c('ListItem',{key:index},[_c('ListItemMeta',{attrs:{\"avatar\":comment.avatar,\"title\":comment.username,\"description\":comment.content}}),_c('template',{slot:\"action\"},[_c('li',[_c('Icon',{attrs:{\"type\":\"ios-thumbs-up-outline\"}}),_vm._v(\"\\n            \"+_vm._s(comment.stars)+\"\\n          \")],1),_c('li',[_vm._v(_vm._s(comment.time))])])],2)}),1)],1),_c('div',{staticClass:\"bottom-area\"},[(_vm.notPrepared)?_c('Button',{attrs:{\"type\":\"primary\",\"loading\":_vm.extracting,\"long\":\"\"},on:{\"click\":_vm.extract}},[_vm._v(_vm._s(_vm.status))]):_c('Button',{attrs:{\"icon\":\"ios-download-outline\",\"type\":\"success\",\"long\":\"\"},on:{\"click\":_vm.download}},[_vm._v(\"下载音频\")])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"fullscreen\">\r\n    <div class=\"video-area\">\r\n      <div class=\"video-background\">\r\n        <video ref=\"video\" controls crossorigin=\"anonymous\" :src=\"videoUrl\"></video>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"comments\">\r\n      <div class=\"info\">\r\n        <b>{{mvinfo.name}}</b>\r\n        <div>{{mvinfo.artist}}</div>\r\n      </div>\r\n      <List style=\"text-align:left\" item-layout=\"vertical\">\r\n        <ListItem v-for=\"(comment, index) in comments\" :key=\"index\">\r\n          <ListItemMeta\r\n            :avatar=\"comment.avatar\"\r\n            :title=\"comment.username\"\r\n            :description=\"comment.content\"\r\n          />\r\n          <template slot=\"action\">\r\n            <li>\r\n              <Icon type=\"ios-thumbs-up-outline\" />\r\n              {{comment.stars}}\r\n            </li>\r\n            <li>{{comment.time}}</li>\r\n          </template>\r\n        </ListItem>\r\n      </List>\r\n    </div>\r\n    <div class=\"bottom-area\">\r\n      <Button\r\n        v-if=\"notPrepared\"\r\n        type=\"primary\"\r\n        :loading=\"extracting\"\r\n        @click=\"extract\"\r\n        long\r\n      >{{status}}</Button>\r\n      <Button v-else icon=\"ios-download-outline\" type=\"success\" @click=\"download\" long>下载音频</Button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  getMV,\r\n  getComment,\r\n  extractAudio\r\n} from \"@/api/apihub.js\";\r\n\r\nexport default {\r\n  name: \"mvPlayer\",\r\n  components: {},\r\n  data() {\r\n    return {\r\n      mvinfo: this.$route.params.mv,\r\n      videoUrl: \"\",\r\n      comments: [],\r\n      extracting: false,\r\n      notPrepared: true,\r\n      status: \"提取音频\",\r\n      extractUrl: \"\"\r\n    };\r\n  },\r\n  methods: {\r\n    initVideo(uri = null) {\r\n      this.videoUrl = uri;\r\n    },\r\n    initComments(comm) {\r\n      this.comments = comm.hot.comments;\r\n    },\r\n    stdParams() {\r\n      return {\r\n        mvurl: this.videoUrl,\r\n        picurl: null,\r\n        metadata: {\r\n          title: this.mvinfo.name,\r\n          artist: this.mvinfo.artist\r\n        }\r\n      };\r\n    },\r\n    extract() {\r\n      this.extracting = true;\r\n      this.status = \"extracting\";\r\n      extractAudio(this.stdParams()).then(resp => {\r\n        this.status = \"提取音频\";\r\n        this.notPrepared = false;\r\n        this.extractUrl = resp.url;\r\n      });\r\n    },\r\n    download() {\r\n      window.open(this.extractUrl);\r\n      /*\r\n      var link = document.createElement('a');\r\n      //设置下载的文件名\r\n      link.download = filename;\r\n      link.style.display = 'none';\r\n      //设置下载路径\r\n      link.href = this.extractUrl;\r\n      //触发点击\r\n      document.body.appendChild(link);\r\n      link.click();\r\n      //移除节点\r\n      document.body.removeChild(link);\r\n      */\r\n    }\r\n  },\r\n  created() {},\r\n  mounted() {\r\n\r\n    this.$emit('shutup');  // stop music when music is playing\r\n    let p = this.mvinfo.platform;\r\n    let id = this.mvinfo.mvid;\r\n    getMV(p, id).then(response => {\r\n      this.initVideo(response.uri);\r\n    });\r\n    getComment(p, id, \"mv\").then(response => {\r\n      this.initComments(response);\r\n    });\r\n  }\r\n};\r\n</script>\r\n<style scoped>\r\n.fullscreen {\r\n  position: fixed;\r\n  top: 0;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  background-color: white;\r\n  z-index: 100;\r\n}\r\n\r\n.video-area {\r\n  height: 32%;\r\n  position: relative;\r\n}\r\n\r\n.comments .info {\r\n  text-align: left;\r\n  position: -webkit-sticky;\r\n  position: sticky;\r\n  top: 0;\r\n  background-color: white;\r\n  z-index: 9;\r\n  padding: 5px 0 0 0;\r\n}\r\n\r\n.comments {\r\n  position: absolute;\r\n  overflow: auto;\r\n  padding: 0 10px;\r\n  top: 32%;\r\n  bottom: 32px;\r\n}\r\n\r\n.bottom-area {\r\n  position: absolute;\r\n  width: 100%;\r\n  bottom: 0;\r\n}\r\n\r\n.video-background {\r\n  background-color: black;\r\n  height: 100%;\r\n}\r\n\r\n.video-background > video {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./mvPlayer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./mvPlayer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./mvPlayer.vue?vue&type=template&id=be74a7d8&scoped=true&\"\nimport script from \"./mvPlayer.vue?vue&type=script&lang=js&\"\nexport * from \"./mvPlayer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./mvPlayer.vue?vue&type=style&index=0&id=be74a7d8&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"be74a7d8\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./mvPlayer.vue?vue&type=style&index=0&id=be74a7d8&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./mvPlayer.vue?vue&type=style&index=0&id=be74a7d8&scoped=true&lang=css&\""],"sourceRoot":""}